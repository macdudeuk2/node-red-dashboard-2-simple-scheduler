(function(){"use strict";try{if(typeof document<"u"){var d=document.createElement("style");d.appendChild(document.createTextNode('.simple-scheduler[data-v-d7a56d50]{font-family:system-ui,-apple-system,sans-serif;padding:16px}.scheduler-header[data-v-d7a56d50]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.scheduler-header h3[data-v-d7a56d50]{margin:0;font-size:20px;font-weight:600}.empty-state[data-v-d7a56d50]{text-align:center;padding:40px 20px;color:#666}.schedule-list[data-v-d7a56d50]{display:flex;flex-direction:column;gap:12px}.schedule-item[data-v-d7a56d50]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:#f5f5f5;border-radius:8px;border:1px solid #e0e0e0}.schedule-info[data-v-d7a56d50]{flex:1}.schedule-name[data-v-d7a56d50]{font-weight:600;font-size:16px;margin-bottom:4px}.schedule-details[data-v-d7a56d50]{font-size:14px;color:#666}.schedule-type[data-v-d7a56d50]{display:inline-block;padding:2px 8px;background:#e3f2fd;color:#1976d2;border-radius:4px;margin-right:8px;font-size:12px}.schedule-actions[data-v-d7a56d50]{display:flex;align-items:center;gap:8px}.btn-primary[data-v-d7a56d50]{background:#1976d2;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;font-size:14px;font-weight:500}.btn-primary[data-v-d7a56d50]:hover{background:#1565c0}.btn-secondary[data-v-d7a56d50]{background:#e0e0e0;color:#333;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;font-size:14px;font-weight:500}.btn-secondary[data-v-d7a56d50]:hover{background:#d0d0d0}.toggle-switch[data-v-d7a56d50]{position:relative;display:inline-block;width:50px;height:24px}.toggle-switch input[data-v-d7a56d50]{opacity:0;width:0;height:0}.slider[data-v-d7a56d50]{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.3s;border-radius:24px}.slider[data-v-d7a56d50]:before{position:absolute;content:"";height:18px;width:18px;left:3px;bottom:3px;background-color:#fff;transition:.3s;border-radius:50%}input:checked+.slider[data-v-d7a56d50]{background-color:#4caf50}input:checked+.slider[data-v-d7a56d50]:before{transform:translate(26px)}.btn-icon[data-v-d7a56d50]{background:none;border:none;cursor:pointer;font-size:18px;padding:4px 8px}.btn-icon[data-v-d7a56d50]:hover{opacity:.7}.btn-delete[data-v-d7a56d50]{color:#dc3545}.dialog-overlay[data-v-d7a56d50]{position:fixed;top:0;left:0;right:0;bottom:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:10000}.dialog-content[data-v-d7a56d50]{background:#fff;border-radius:8px;width:90%;max-width:500px;max-height:90vh;overflow-y:auto}.dialog-header[data-v-d7a56d50]{display:flex;justify-content:space-between;align-items:center;padding:16px;border-bottom:1px solid #ddd}.dialog-header h3[data-v-d7a56d50]{margin:0;font-size:18px}.btn-close[data-v-d7a56d50]{background:none;border:none;font-size:28px;cursor:pointer;padding:0;width:32px;height:32px;line-height:1}.dialog-body[data-v-d7a56d50]{padding:16px}.dialog-footer[data-v-d7a56d50]{padding:16px;border-top:1px solid #ddd;display:flex;justify-content:flex-end;gap:8px}.form-group[data-v-d7a56d50]{margin-bottom:16px}.form-group label[data-v-d7a56d50]{display:block;margin-bottom:4px;font-weight:500;font-size:14px}.form-group input[type=text][data-v-d7a56d50],.form-group input[type=time][data-v-d7a56d50],.form-group input[type=number][data-v-d7a56d50],.form-group input[type=datetime-local][data-v-d7a56d50],.form-group select[data-v-d7a56d50]{width:100%;padding:8px;border:1px solid #ddd;border-radius:4px;font-size:14px;box-sizing:border-box}.day-selector[data-v-d7a56d50]{display:flex;flex-wrap:wrap;gap:8px}.day-checkbox[data-v-d7a56d50]{display:flex;align-items:center;gap:4px;padding:6px 12px;background:#f5f5f5;border:1px solid #ddd;border-radius:4px;cursor:pointer;font-size:14px}.day-checkbox input[type=checkbox][data-v-d7a56d50]{cursor:pointer}.help-text[data-v-d7a56d50]{font-size:12px;color:#666;margin:4px 0 0}.payload-input-group[data-v-d7a56d50]{display:flex;gap:8px;align-items:center}.payload-type-select[data-v-d7a56d50]{min-width:100px;max-width:100px;padding:8px;border:1px solid #ddd;border-radius:4px;font-size:14px;box-sizing:border-box;flex-shrink:0}.payload-value-input[data-v-d7a56d50]{flex:1;min-width:0;padding:8px;border:1px solid #ddd;border-radius:4px;font-size:14px;box-sizing:border-box}.simple-scheduler *{box-sizing:border-box}.simple-scheduler{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif}.simple-scheduler .dialog-overlay{z-index:10000!important}')),document.head.appendChild(d)}}catch(a){console.error("vite-plugin-css-injected-by-js",a)}})();
(function(d,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(d=typeof globalThis<"u"?globalThis:d||self,e(d["ui-scheduler"]={},d.Vue))})(this,function(d,e){"use strict";const m=(o,t)=>{const i=o.__vccOpts||o;for(const[s,a]of t)i[s]=a;return i},c={name:"SimpleScheduler",inject:{$socket:{default:null}},props:{id:{type:String,required:!0},props:{type:Object,default:()=>({})},state:{type:Object,default:()=>({})}},computed:{socket(){return this.$socket},nodeName(){return this.props&&this.props.name||"Schedules"}},data(){return{schedules:[],showAddDialog:!1,editingSchedule:null,formData:{id:null,name:"",type:"daily",date:null,time:"09:00",days:[],startTime:"09:00",endTime:"17:00",durationMinutes:60,payloadOn:"true",payloadOnType:"bool",payloadOff:"false",payloadOffType:"bool",enabled:!0},payloadTypes:[{value:"str",label:"string"},{value:"num",label:"number"},{value:"bool",label:"boolean"},{value:"json",label:"JSON"}],daysOfWeek:[{value:"sunday",label:"Sunday"},{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"}]}},mounted(){this.socket&&(this.socket.on("msg-input:"+this.id,o=>{o.payload&&o.payload.command==="schedules-updated"&&(this.schedules=o.payload.schedules||[])}),this.socket.on("widget-load:"+this.id,o=>{o&&o.payload&&o.payload.command==="schedules-updated"&&(this.schedules=o.payload.schedules||[])}),this.socket.on("connect",()=>{this.requestSchedules()})),this.requestSchedules()},beforeUnmount(){this.socket&&(this.socket.off("msg-input:"+this.id),this.socket.off("widget-load:"+this.id))},methods:{requestSchedules(){this.socket&&this.socket.emit("widget-action",this.id,{action:"list",payload:null})},getScheduleTypeLabel(o){return{once:"One-time",daily:"Daily",weekly:"Weekly",timespan:"Timespan",duration:"Duration"}[o]||o},getScheduleDetails(o){switch(o.type){case"once":return new Date(o.date).toLocaleString();case"daily":return`Every day at ${o.time}`;case"weekly":const t=o.days.map(i=>{var s;return((s=this.daysOfWeek.find(a=>a.value===i))==null?void 0:s.label)||i}).join(", ");return o.startTime&&o.endTime?`${t}: ${o.startTime} - ${o.endTime}`:`${t} at ${o.time||o.startTime||"09:00"}`;case"timespan":return`${o.startTime} - ${o.endTime}`;case"duration":return`${o.durationMinutes} minutes`;default:return""}},onTypeChange(){this.formData.days=[],this.formData.time="09:00",this.formData.startTime="09:00",this.formData.endTime="17:00",this.formData.durationMinutes=60},toggleSchedule(o){const t=this.schedules.find(i=>i.id===o);if(t){const i=t.enabled?"disable":"enable";this.socket&&this.socket.emit("widget-action",this.id,{action:i,payload:o})}},editSchedule(o){if(this.editingSchedule=o,this.formData={...o,payloadOnType:o.payloadOnType||"bool",payloadOffType:o.payloadOffType||"bool"},o.date){const t=new Date(o.date),i=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),n=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");this.formData.date=`${i}-${s}-${a}T${n}:${l}`}this.showAddDialog=!0},copySchedule(o){const t={...o,id:null,name:o.name+" (Copy)",payloadOnType:o.payloadOnType||"bool",payloadOffType:o.payloadOffType||"bool"};this.formData=t,this.editingSchedule=null,this.showAddDialog=!0},deleteSchedule(o){confirm("Are you sure you want to delete this schedule?")&&this.socket&&this.socket.emit("widget-action",this.id,{action:"remove",payload:o})},saveSchedule(){if(!this.formData.name){alert("Please enter a schedule name");return}if(this.formData.type==="once"&&!this.formData.date){alert("Please select a date and time for the one-time schedule");return}if(this.formData.type==="weekly"&&this.formData.days.length===0){alert("Please select at least one day for the weekly schedule");return}if(!this.validatePayload(this.formData.payloadOn,this.formData.payloadOnType)){alert(`Invalid Payload On for type "${this.formData.payloadOnType}"`);return}if((this.formData.type==="timespan"||this.formData.type==="duration"||this.formData.type==="weekly")&&!this.validatePayload(this.formData.payloadOff,this.formData.payloadOffType)){alert(`Invalid Payload Off for type "${this.formData.payloadOffType}"`);return}const o={...this.formData};o.type==="once"&&o.date&&(o.date=new Date(o.date).toISOString()),o.id||(o.id="schedule-"+Date.now()+"-"+Math.random().toString(36).substr(2,9)),this.socket&&this.socket.emit("widget-action",this.id,{action:this.editingSchedule?"update":"add",payload:o}),this.closeDialog()},getPayloadPlaceholder(o){return{str:'"text"',num:"123",bool:"true",json:'{"key":"value"}'}[o]||""},getPayloadHelpText(o){return{str:"String value (quotes optional)",num:"Number value (e.g., 123, 45.67)",bool:"Boolean: true or false",json:'JSON object or array: {"key":"value"} or [1,2,3]'}[o]||""},validatePayload(o,t){if(!o&&o!==0&&o!==!1)return!1;if(t==="num")return!isNaN(o);if(t==="bool")return o==="true"||o==="false"||o===!0||o===!1;if(t==="json")try{return JSON.parse(o),!0}catch{return!1}return!0},closeDialog(){this.showAddDialog=!1,this.editingSchedule=null,this.formData={id:null,name:"",type:"daily",date:null,time:"09:00",days:[],startTime:"09:00",endTime:"17:00",durationMinutes:60,payloadOn:"true",payloadOnType:"bool",payloadOff:"false",payloadOffType:"bool",enabled:!0}},openAddDialog(){this.editingSchedule=null,this.showAddDialog=!0}}},p={class:"simple-scheduler"},y={class:"scheduler-header"},f={key:0,class:"empty-state"},h={key:1,class:"schedule-list"},u={class:"schedule-info"},D={class:"schedule-name"},g={class:"schedule-details"},k={class:"schedule-type"},V={class:"schedule-time"},E={class:"schedule-actions"},b={class:"toggle-switch"},N=["checked","onChange"],T=["onClick"],S=["onClick"],O=["onClick"],w={class:"dialog-header"},B={class:"dialog-body"},x={class:"form-group"},C={class:"form-group"},M={key:0,class:"form-group"},P={key:1,class:"form-group"},_={key:2},U={class:"form-group"},q={class:"day-selector"},A=["value"],j={class:"form-group"},L={class:"form-group"},F={key:3},W={class:"form-group"},H={class:"form-group"},I={key:4,class:"form-group"},J={class:"form-group"},Y={class:"payload-input-group"},z=["value"],G=["placeholder"],K={class:"help-text"},Q={key:5,class:"form-group"},R={class:"payload-input-group"},X=["value"],Z=["placeholder"],v={class:"help-text"},$={class:"form-group"},ee={class:"dialog-footer"};function te(o,t,i,s,a,n){return e.openBlock(),e.createElementBlock("div",p,[e.createElementVNode("div",y,[e.createElementVNode("h3",null,e.toDisplayString(n.nodeName),1),e.createElementVNode("button",{onClick:t[0]||(t[0]=(...l)=>n.openAddDialog&&n.openAddDialog(...l)),class:"btn-primary"},"+ Add Schedule")]),a.schedules.length===0?(e.openBlock(),e.createElementBlock("div",f,[...t[23]||(t[23]=[e.createElementVNode("p",null,"No schedules configured yet",-1)])])):(e.openBlock(),e.createElementBlock("div",h,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.schedules,l=>(e.openBlock(),e.createElementBlock("div",{key:l.id,class:"schedule-item"},[e.createElementVNode("div",u,[e.createElementVNode("div",D,e.toDisplayString(l.name),1),e.createElementVNode("div",g,[e.createElementVNode("span",k,e.toDisplayString(n.getScheduleTypeLabel(l.type)),1),e.createElementVNode("span",V,e.toDisplayString(n.getScheduleDetails(l)),1)])]),e.createElementVNode("div",E,[e.createElementVNode("label",b,[e.createElementVNode("input",{type:"checkbox",checked:l.enabled,onChange:r=>n.toggleSchedule(l.id)},null,40,N),t[24]||(t[24]=e.createElementVNode("span",{class:"slider"},null,-1))]),e.createElementVNode("button",{onClick:r=>n.editSchedule(l),class:"btn-icon",title:"Edit"}," ✏️ ",8,T),e.createElementVNode("button",{onClick:r=>n.copySchedule(l),class:"btn-icon",title:"Copy"}," 📋 ",8,S),e.createElementVNode("button",{onClick:r=>n.deleteSchedule(l.id),class:"btn-icon btn-delete",title:"Delete"}," 🗑️ ",8,O)])]))),128))])),a.showAddDialog?(e.openBlock(),e.createElementBlock("div",{key:2,class:"dialog-overlay",onClick:t[22]||(t[22]=e.withModifiers((...l)=>n.closeDialog&&n.closeDialog(...l),["self"]))},[e.createElementVNode("div",{class:"dialog-content",onClick:t[20]||(t[20]=e.withModifiers(()=>{},["stop"])),onMousedown:t[21]||(t[21]=e.withModifiers(()=>{},["stop"]))},[e.createElementVNode("div",w,[e.createElementVNode("h3",null,e.toDisplayString(a.editingSchedule?"Edit Schedule":"Add Schedule"),1),e.createElementVNode("button",{onClick:t[1]||(t[1]=(...l)=>n.closeDialog&&n.closeDialog(...l)),class:"btn-close"},"×")]),e.createElementVNode("div",B,[e.createElementVNode("div",x,[t[25]||(t[25]=e.createElementVNode("label",null,"Name *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>a.formData.name=l),type:"text",placeholder:"Schedule name",required:""},null,512),[[e.vModelText,a.formData.name]])]),e.createElementVNode("div",C,[t[27]||(t[27]=e.createElementVNode("label",null,"Type *",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[3]||(t[3]=l=>a.formData.type=l),onChange:t[4]||(t[4]=(...l)=>n.onTypeChange&&n.onTypeChange(...l))},[...t[26]||(t[26]=[e.createStaticVNode('<option value="daily" data-v-d7a56d50>Daily</option><option value="weekly" data-v-d7a56d50>Weekly</option><option value="once" data-v-d7a56d50>One-time</option><option value="timespan" data-v-d7a56d50>Timespan</option><option value="duration" data-v-d7a56d50>Duration</option>',5)])],544),[[e.vModelSelect,a.formData.type]])]),a.formData.type==="once"?(e.openBlock(),e.createElementBlock("div",M,[t[28]||(t[28]=e.createElementVNode("label",null,"Date & Time *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>a.formData.date=l),type:"datetime-local",required:""},null,512),[[e.vModelText,a.formData.date]])])):e.createCommentVNode("",!0),a.formData.type==="daily"?(e.openBlock(),e.createElementBlock("div",P,[t[29]||(t[29]=e.createElementVNode("label",null,"Time *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>a.formData.time=l),type:"time",required:""},null,512),[[e.vModelText,a.formData.time]])])):e.createCommentVNode("",!0),a.formData.type==="weekly"?(e.openBlock(),e.createElementBlock("div",_,[e.createElementVNode("div",U,[t[30]||(t[30]=e.createElementVNode("label",null,"Days *",-1)),e.createElementVNode("div",q,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.daysOfWeek,l=>(e.openBlock(),e.createElementBlock("label",{key:l.value,class:"day-checkbox"},[e.withDirectives(e.createElementVNode("input",{type:"checkbox",value:l.value,"onUpdate:modelValue":t[7]||(t[7]=r=>a.formData.days=r)},null,8,A),[[e.vModelCheckbox,a.formData.days]]),e.createTextVNode(" "+e.toDisplayString(l.label),1)]))),128))])]),e.createElementVNode("div",j,[t[31]||(t[31]=e.createElementVNode("label",null,"Start Time *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[8]||(t[8]=l=>a.formData.startTime=l),type:"time",required:""},null,512),[[e.vModelText,a.formData.startTime]])]),e.createElementVNode("div",L,[t[32]||(t[32]=e.createElementVNode("label",null,"End Time *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[9]||(t[9]=l=>a.formData.endTime=l),type:"time",required:""},null,512),[[e.vModelText,a.formData.endTime]])])])):e.createCommentVNode("",!0),a.formData.type==="timespan"?(e.openBlock(),e.createElementBlock("div",F,[e.createElementVNode("div",W,[t[33]||(t[33]=e.createElementVNode("label",null,"Start Time *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[10]||(t[10]=l=>a.formData.startTime=l),type:"time",required:""},null,512),[[e.vModelText,a.formData.startTime]])]),e.createElementVNode("div",H,[t[34]||(t[34]=e.createElementVNode("label",null,"End Time *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[11]||(t[11]=l=>a.formData.endTime=l),type:"time",required:""},null,512),[[e.vModelText,a.formData.endTime]])])])):e.createCommentVNode("",!0),a.formData.type==="duration"?(e.openBlock(),e.createElementBlock("div",I,[t[35]||(t[35]=e.createElementVNode("label",null,"Duration (minutes) *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[12]||(t[12]=l=>a.formData.durationMinutes=l),type:"number",min:"1",required:""},null,512),[[e.vModelText,a.formData.durationMinutes,void 0,{number:!0}]]),t[36]||(t[36]=e.createElementVNode("p",{class:"help-text"},"Duration schedules are triggered manually or by other schedules.",-1))])):e.createCommentVNode("",!0),e.createElementVNode("div",J,[e.createElementVNode("label",null,e.toDisplayString(a.formData.type==="timespan"||a.formData.type==="duration"||a.formData.type==="weekly"?"Payload On (when schedule starts) *":"Payload *"),1),e.createElementVNode("div",Y,[e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[13]||(t[13]=l=>a.formData.payloadOnType=l),class:"payload-type-select"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.payloadTypes,l=>(e.openBlock(),e.createElementBlock("option",{key:l.value,value:l.value},e.toDisplayString(l.label),9,z))),128))],512),[[e.vModelSelect,a.formData.payloadOnType]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[14]||(t[14]=l=>a.formData.payloadOn=l),type:"text",placeholder:n.getPayloadPlaceholder(a.formData.payloadOnType),class:"payload-value-input"},null,8,G),[[e.vModelText,a.formData.payloadOn]])]),e.createElementVNode("p",K,e.toDisplayString(n.getPayloadHelpText(a.formData.payloadOnType)),1)]),a.formData.type==="timespan"||a.formData.type==="duration"||a.formData.type==="weekly"?(e.openBlock(),e.createElementBlock("div",Q,[t[37]||(t[37]=e.createElementVNode("label",null,"Payload Off (when schedule ends)",-1)),e.createElementVNode("div",R,[e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[15]||(t[15]=l=>a.formData.payloadOffType=l),class:"payload-type-select"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.payloadTypes,l=>(e.openBlock(),e.createElementBlock("option",{key:l.value,value:l.value},e.toDisplayString(l.label),9,X))),128))],512),[[e.vModelSelect,a.formData.payloadOffType]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[16]||(t[16]=l=>a.formData.payloadOff=l),type:"text",placeholder:n.getPayloadPlaceholder(a.formData.payloadOffType),class:"payload-value-input"},null,8,Z),[[e.vModelText,a.formData.payloadOff]])]),e.createElementVNode("p",v,e.toDisplayString(n.getPayloadHelpText(a.formData.payloadOffType)),1)])):e.createCommentVNode("",!0),e.createElementVNode("div",$,[e.createElementVNode("label",null,[e.withDirectives(e.createElementVNode("input",{type:"checkbox","onUpdate:modelValue":t[17]||(t[17]=l=>a.formData.enabled=l)},null,512),[[e.vModelCheckbox,a.formData.enabled]]),t[38]||(t[38]=e.createTextVNode(" Enable schedule ",-1))])])]),e.createElementVNode("div",ee,[e.createElementVNode("button",{onClick:t[18]||(t[18]=(...l)=>n.closeDialog&&n.closeDialog(...l)),class:"btn-secondary"},"Cancel"),e.createElementVNode("button",{onClick:t[19]||(t[19]=(...l)=>n.saveSchedule&&n.saveSchedule(...l)),class:"btn-primary"},"Save")])],32)])):e.createCommentVNode("",!0)])}const oe=m(c,[["render",te],["__scopeId","data-v-d7a56d50"]]);d.SimpleScheduler=oe,Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})});
